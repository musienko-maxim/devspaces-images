======= BOOTSTRAP DOCKERFILE =======>
#
# Copyright (c) 2018-2022 Red Hat, Inc.
# This program and the accompanying materials are made
# available under the terms of the Eclipse Public License 2.0
# which is available at https://www.eclipse.org/legal/epl-2.0/
#
# SPDX-License-Identifier: EPL-2.0
#
# Contributors:
#   Red Hat, Inc. - initial API and implementation
#   IBM Corporation - implementation
#

# Builder: check meta.yamls and create index.json
# registry.access.redhat.com/ubi8/python-38
FROM registry-proxy.engineering.redhat.com/rh-osbs/ubi8-python-38:1-100 as builder
USER 0

ARG BOOTSTRAP=true
ENV BOOTSTRAP=${BOOTSTRAP}
# if not defined or string is null, allow all registries/tags in list_referenced_images
# otherwise restrict to only those space-separated registries/tags; if others found, build will fail
# useful for failing build if quay images in an RC, or wrong devspaces image tag (3.2 in 3.1 build)
ARG ALLOWED_REGISTRIES=""
ENV ALLOWED_REGISTRIES=${ALLOWED_REGISTRIES}
ARG ALLOWED_TAGS=""
ENV ALLOWED_TAGS=${ALLOWED_TAGS}

COPY ./build/dockerfiles/content_sets_rhel8.repo /etc/yum.repos.d/
COPY ./build/dockerfiles/rhel.install.sh /tmp
RUN /tmp/rhel.install.sh && rm -f /tmp/rhel.install.sh

COPY ./build/scripts ./versions.json /build/
COPY ./build/scripts/clone_and_zip.sh /build/build/scripts/
COPY ./VERSION /
COPY ./devfiles /build/devfiles
WORKDIR /build/

RUN ./generate_devworkspace_templates.sh
RUN chmod -R g+rwX /build/resources

# validate devfile content
RUN ./check_referenced_images.sh devfiles --registries "${ALLOWED_REGISTRIES}" --tags "${ALLOWED_TAGS}"
RUN ./check_mandatory_fields.sh devfiles

# Cache projects in DS 
COPY ./build/dockerfiles/rhel.cache_projects.sh /tmp/ 
RUN /tmp/rhel.cache_projects.sh /build/ && rm -rf /tmp/rhel.cache_projects.sh /tmp/resources.tgz 

# don't do swaps, or we end up with missing content if built on s390x or ppc64le worker
# RUN ./swap_yamlfiles.sh devfiles
# RUN ./swap_images.sh devfiles
RUN ./index.sh > /build/devfiles/index.json && \
    ./list_referenced_images.sh devfiles > /build/devfiles/external_images.txt && \
    ./list_referenced_images_by_file.sh devfiles > /build/devfiles/external_images_by_devfile.txt && \
    chmod -R g+rwX /build/devfiles

<======= BOOTSTRAP DOCKERFILE =======
======= START BOOTSTRAP BUILD =======>
STEP 1/23: FROM registry-proxy.engineering.redhat.com/rh-osbs/ubi8-python-38:1-100 AS builder
STEP 2/23: USER 0
--> 9545f5af433
STEP 3/23: ARG BOOTSTRAP=true
--> 60ce43fc0b6
STEP 4/23: ENV BOOTSTRAP=${BOOTSTRAP}
--> a16d01e04ea
STEP 5/23: ARG ALLOWED_REGISTRIES=""
--> b496b4f3227
STEP 6/23: ENV ALLOWED_REGISTRIES=${ALLOWED_REGISTRIES}
--> 0263fc7973b
STEP 7/23: ARG ALLOWED_TAGS=""
--> 9b2dd84790c
STEP 8/23: ENV ALLOWED_TAGS=${ALLOWED_TAGS}
--> 1a775abcb38
STEP 9/23: COPY ./build/dockerfiles/content_sets_rhel8.repo /etc/yum.repos.d/
--> 1236ec1ff67
STEP 10/23: COPY ./build/dockerfiles/rhel.install.sh /tmp
--> 3c0a39133e9
STEP 11/23: RUN /tmp/rhel.install.sh && rm -f /tmp/rhel.install.sh
Updating Subscription Management repositories.
Unable to read consumer identity
Subscription Manager is operating in container mode.

This system is not registered with an entitlement server. You can use subscription-manager to register.

Red Hat Enterprise Linux 8 for Power, little en  64 MB/s |  39 MB     00:00    
Red Hat Enterprise Linux 8 for Power, little en  66 MB/s |  44 MB     00:00    
Red Hat Universal Base Image 8 (RPMs) - BaseOS  1.0 MB/s | 577 kB     00:00    
Red Hat Universal Base Image 8 (RPMs) - AppStre 3.4 MB/s | 2.6 MB     00:00    
Red Hat Universal Base Image 8 (RPMs) - CodeRea  22 kB/s |  14 kB     00:00    
Package findutils-1:4.6.0-20.el8.ppc64le is already installed.
Package bash-4.4.20-3.el8.ppc64le is already installed.
Package wget-1.19.5-10.el8.ppc64le is already installed.
Package yum-4.7.0-8.el8.noarch is already installed.
Package git-2.31.1-2.el8.ppc64le is already installed.
Package gzip-1.9-13.el8_5.ppc64le is already installed.
Package tar-2:1.30-5.el8.ppc64le is already installed.
Package python3-six-1.11.0-8.el8.noarch is already installed.
Dependencies resolved.
================================================================================================================
 Package               Arch     Version                                 Repository                          Size
================================================================================================================
Installing:
 jq                    ppc64le  1.6-3.el8                               rhel-8-for-ppc64le-appstream-rpms  215 k
 python3-pip           noarch   9.0.3-22.el8                            rhel-8-for-ppc64le-appstream-rpms   20 k
 skopeo                ppc64le  2:1.8.0-2.module+el8.6.0+15917+093ca6f8 rhel-8-for-ppc64le-appstream-rpms  5.9 M
Upgrading:
 bash                  ppc64le  4.4.20-4.el8_6                          rhel-8-for-ppc64le-baseos-rpms     1.6 M
Installing dependencies:
 containers-common     ppc64le  2:1-35.module+el8.6.0+15917+093ca6f8    rhel-8-for-ppc64le-appstream-rpms  109 k
 criu                  ppc64le  3.15-3.module+el8.6.0+15875+dc9a2b96    rhel-8-for-ppc64le-appstream-rpms  536 k
 fuse-common           ppc64le  3.3.0-15.el8                            rhel-8-for-ppc64le-baseos-rpms      22 k
 fuse3                 ppc64le  3.3.0-15.el8                            rhel-8-for-ppc64le-baseos-rpms      57 k
 fuse3-libs            ppc64le  3.3.0-15.el8                            rhel-8-for-ppc64le-baseos-rpms      99 k
 iptables-libs         ppc64le  1.8.4-22.el8                            rhel-8-for-ppc64le-baseos-rpms     114 k
 jansson               ppc64le  2.14-1.el8                              rhel-8-for-ppc64le-baseos-rpms      51 k
 kmod                  ppc64le  25-19.el8                               rhel-8-for-ppc64le-baseos-rpms     138 k
 libibverbs            ppc64le  37.2-1.el8                              rhel-8-for-ppc64le-baseos-rpms     412 k
 libmnl                ppc64le  1.0.4-6.el8                             rhel-8-for-ppc64le-baseos-rpms      31 k
 libnet                ppc64le  1.1.6-15.el8                            rhel-8-for-ppc64le-appstream-rpms   73 k
 libnftnl              ppc64le  1.1.5-5.el8                             rhel-8-for-ppc64le-baseos-rpms      88 k
 libpcap               ppc64le  14:1.9.1-5.el8                          rhel-8-for-ppc64le-baseos-rpms     176 k
 libslirp              ppc64le  4.4.0-1.module+el8.6.0+15875+dc9a2b96   rhel-8-for-ppc64le-appstream-rpms   74 k
 nftables              ppc64le  1:0.9.3-25.el8                          rhel-8-for-ppc64le-baseos-rpms     340 k
 oniguruma             ppc64le  6.8.2-2.el8                             rhel-8-for-ppc64le-appstream-rpms  199 k
 platform-python-pip   noarch   9.0.3-22.el8                            rhel-8-for-ppc64le-baseos-rpms     1.6 M
 protobuf-c            ppc64le  1.3.0-6.el8                             rhel-8-for-ppc64le-appstream-rpms   40 k
 python3-setuptools    noarch   39.2.0-6.el8                            rhel-8-for-ppc64le-baseos-rpms     163 k
 python36              ppc64le  3.6.8-38.module+el8.5.0+12207+5c5719bc  rhel-8-for-ppc64le-appstream-rpms   19 k
 runc                  ppc64le  1:1.1.3-2.module+el8.6.0+15917+093ca6f8 rhel-8-for-ppc64le-appstream-rpms  2.6 M
Installing weak dependencies:
 fuse-overlayfs        ppc64le  1.9-1.module+el8.6.0+15917+093ca6f8     rhel-8-for-ppc64le-appstream-rpms   74 k
 slirp4netns           ppc64le  1.2.0-2.module+el8.6.0+15917+093ca6f8   rhel-8-for-ppc64le-appstream-rpms   59 k
Enabling module streams:
 container-tools                rhel8                                                                           
 python36                       3.6                                                                             

Transaction Summary
================================================================================================================
Install  26 Packages
Upgrade   1 Package

Total download size: 15 M
Downloading Packages:
(1/27): libnet-1.1.6-15.el8.ppc64le.rpm         692 kB/s |  73 kB     00:00    
(2/27): python3-setuptools-39.2.0-6.el8.noarch. 1.5 MB/s | 163 kB     00:00    
(3/27): protobuf-c-1.3.0-6.el8.ppc64le.rpm      280 kB/s |  40 kB     00:00    
(4/27): libmnl-1.0.4-6.el8.ppc64le.rpm          207 kB/s |  31 kB     00:00    
(5/27): oniguruma-6.8.2-2.el8.ppc64le.rpm       1.2 MB/s | 199 kB     00:00    
(6/27): python36-3.6.8-38.module+el8.5.0+12207+ 369 kB/s |  19 kB     00:00    
(7/27): python3-pip-9.0.3-22.el8.noarch.rpm     1.0 MB/s |  20 kB     00:00    
(8/27): libpcap-1.9.1-5.el8.ppc64le.rpm         1.0 MB/s | 176 kB     00:00    
(9/27): fuse-overlayfs-1.9-1.module+el8.6.0+159 3.0 MB/s |  74 kB     00:00    
(10/27): libnftnl-1.1.5-5.el8.ppc64le.rpm       2.4 MB/s |  88 kB     00:00    
(11/27): containers-common-1-35.module+el8.6.0+ 4.1 MB/s | 109 kB     00:00    
(12/27): fuse3-3.3.0-15.el8.ppc64le.rpm         2.3 MB/s |  57 kB     00:00    
(13/27): jq-1.6-3.el8.ppc64le.rpm               5.7 MB/s | 215 kB     00:00    
(14/27): libslirp-4.4.0-1.module+el8.6.0+15875+ 2.6 MB/s |  74 kB     00:00    
(15/27): platform-python-pip-9.0.3-22.el8.noarc  15 MB/s | 1.6 MB     00:00    
(16/27): fuse3-libs-3.3.0-15.el8.ppc64le.rpm    2.7 MB/s |  99 kB     00:00    
(17/27): libibverbs-37.2-1.el8.ppc64le.rpm      7.0 MB/s | 412 kB     00:00    
(18/27): kmod-25-19.el8.ppc64le.rpm             5.1 MB/s | 138 kB     00:00    
(19/27): jansson-2.14-1.el8.ppc64le.rpm         2.1 MB/s |  51 kB     00:00    
(20/27): criu-3.15-3.module+el8.6.0+15875+dc9a2  11 MB/s | 536 kB     00:00    
(21/27): fuse-common-3.3.0-15.el8.ppc64le.rpm   483 kB/s |  22 kB     00:00    
(22/27): nftables-0.9.3-25.el8.ppc64le.rpm      6.2 MB/s | 340 kB     00:00    
(23/27): slirp4netns-1.2.0-2.module+el8.6.0+159 1.4 MB/s |  59 kB     00:00    
(24/27): iptables-libs-1.8.4-22.el8.ppc64le.rpm 2.1 MB/s | 114 kB     00:00    
(25/27): runc-1.1.3-2.module+el8.6.0+15917+093c  17 MB/s | 2.6 MB     00:00    
(26/27): bash-4.4.20-4.el8_6.ppc64le.rpm         22 MB/s | 1.6 MB     00:00    
(27/27): skopeo-1.8.0-2.module+el8.6.0+15917+09  27 MB/s | 5.9 MB     00:00    
--------------------------------------------------------------------------------
Total                                            35 MB/s |  15 MB     00:00     
Running transaction check
Transaction check succeeded.
Running transaction test
Transaction test succeeded.
Running transaction
  Preparing        :                                                        1/1 
  Upgrading        : bash-4.4.20-4.el8_6.ppc64le                           1/28 
  Running scriptlet: bash-4.4.20-4.el8_6.ppc64le                           1/28 
  Installing       : fuse3-libs-3.3.0-15.el8.ppc64le                       2/28 
  Running scriptlet: fuse3-libs-3.3.0-15.el8.ppc64le                       2/28 
  Installing       : libmnl-1.0.4-6.el8.ppc64le                            3/28 
  Running scriptlet: libmnl-1.0.4-6.el8.ppc64le                            3/28 
  Installing       : libnftnl-1.1.5-5.el8.ppc64le                          4/28 
  Running scriptlet: libnftnl-1.1.5-5.el8.ppc64le                          4/28 
  Installing       : libibverbs-37.2-1.el8.ppc64le                         5/28 
  Running scriptlet: libibverbs-37.2-1.el8.ppc64le                         5/28 
  Installing       : libpcap-14:1.9.1-5.el8.ppc64le                        6/28 
  Installing       : iptables-libs-1.8.4-22.el8.ppc64le                    7/28 
  Installing       : kmod-25-19.el8.ppc64le                                8/28 
  Installing       : fuse-common-3.3.0-15.el8.ppc64le                      9/28 
  Installing       : fuse3-3.3.0-15.el8.ppc64le                           10/28 
  Installing       : fuse-overlayfs-1.9-1.module+el8.6.0+15917+093ca6f8   11/28 
  Running scriptlet: fuse-overlayfs-1.9-1.module+el8.6.0+15917+093ca6f8   11/28 
  Installing       : jansson-2.14-1.el8.ppc64le                           12/28 
  Installing       : nftables-1:0.9.3-25.el8.ppc64le                      13/28 
  Running scriptlet: nftables-1:0.9.3-25.el8.ppc64le                      13/28 
  Installing       : platform-python-pip-9.0.3-22.el8.noarch              14/28 
  Installing       : python3-setuptools-39.2.0-6.el8.noarch               15/28 
  Installing       : python3-pip-9.0.3-22.el8.noarch                      16/28 
  Installing       : python36-3.6.8-38.module+el8.5.0+12207+5c5719bc.pp   17/28 
  Running scriptlet: python36-3.6.8-38.module+el8.5.0+12207+5c5719bc.pp   17/28 
  Installing       : libslirp-4.4.0-1.module+el8.6.0+15875+dc9a2b96.ppc   18/28 
  Installing       : slirp4netns-1.2.0-2.module+el8.6.0+15917+093ca6f8.   19/28 
  Installing       : protobuf-c-1.3.0-6.el8.ppc64le                       20/28 
  Installing       : oniguruma-6.8.2-2.el8.ppc64le                        21/28 
  Running scriptlet: oniguruma-6.8.2-2.el8.ppc64le                        21/28 
  Installing       : libnet-1.1.6-15.el8.ppc64le                          22/28 
  Running scriptlet: libnet-1.1.6-15.el8.ppc64le                          22/28 
  Installing       : criu-3.15-3.module+el8.6.0+15875+dc9a2b96.ppc64le    23/28 
  Installing       : runc-1:1.1.3-2.module+el8.6.0+15917+093ca6f8.ppc64   24/28 
  Installing       : containers-common-2:1-35.module+el8.6.0+15917+093c   25/28 
  Installing       : skopeo-2:1.8.0-2.module+el8.6.0+15917+093ca6f8.ppc   26/28 
  Installing       : jq-1.6-3.el8.ppc64le                                 27/28 
  Cleanup          : bash-4.4.20-3.el8.ppc64le                            28/28 
  Running scriptlet: bash-4.4.20-3.el8.ppc64le                            28/28 
  Verifying        : libnet-1.1.6-15.el8.ppc64le                           1/28 
  Verifying        : oniguruma-6.8.2-2.el8.ppc64le                         2/28 
  Verifying        : protobuf-c-1.3.0-6.el8.ppc64le                        3/28 
  Verifying        : python36-3.6.8-38.module+el8.5.0+12207+5c5719bc.pp    4/28 
  Verifying        : python3-pip-9.0.3-22.el8.noarch                       5/28 
  Verifying        : jq-1.6-3.el8.ppc64le                                  6/28 
  Verifying        : fuse-overlayfs-1.9-1.module+el8.6.0+15917+093ca6f8    7/28 
  Verifying        : containers-common-2:1-35.module+el8.6.0+15917+093c    8/28 
  Verifying        : libslirp-4.4.0-1.module+el8.6.0+15875+dc9a2b96.ppc    9/28 
  Verifying        : runc-1:1.1.3-2.module+el8.6.0+15917+093ca6f8.ppc64   10/28 
  Verifying        : skopeo-2:1.8.0-2.module+el8.6.0+15917+093ca6f8.ppc   11/28 
  Verifying        : criu-3.15-3.module+el8.6.0+15875+dc9a2b96.ppc64le    12/28 
  Verifying        : slirp4netns-1.2.0-2.module+el8.6.0+15917+093ca6f8.   13/28 
  Verifying        : libmnl-1.0.4-6.el8.ppc64le                           14/28 
  Verifying        : python3-setuptools-39.2.0-6.el8.noarch               15/28 
  Verifying        : libpcap-14:1.9.1-5.el8.ppc64le                       16/28 
  Verifying        : platform-python-pip-9.0.3-22.el8.noarch              17/28 
  Verifying        : libnftnl-1.1.5-5.el8.ppc64le                         18/28 
  Verifying        : fuse3-3.3.0-15.el8.ppc64le                           19/28 
  Verifying        : libibverbs-37.2-1.el8.ppc64le                        20/28 
  Verifying        : fuse3-libs-3.3.0-15.el8.ppc64le                      21/28 
  Verifying        : kmod-25-19.el8.ppc64le                               22/28 
  Verifying        : jansson-2.14-1.el8.ppc64le                           23/28 
  Verifying        : nftables-1:0.9.3-25.el8.ppc64le                      24/28 
  Verifying        : fuse-common-3.3.0-15.el8.ppc64le                     25/28 
  Verifying        : iptables-libs-1.8.4-22.el8.ppc64le                   26/28 
  Verifying        : bash-4.4.20-4.el8_6.ppc64le                          27/28 
  Verifying        : bash-4.4.20-3.el8.ppc64le                            28/28 
Installed products updated.

Upgraded:
  bash-4.4.20-4.el8_6.ppc64le                                                   
Installed:
  containers-common-2:1-35.module+el8.6.0+15917+093ca6f8.ppc64le                
  criu-3.15-3.module+el8.6.0+15875+dc9a2b96.ppc64le                             
  fuse-common-3.3.0-15.el8.ppc64le                                              
  fuse-overlayfs-1.9-1.module+el8.6.0+15917+093ca6f8.ppc64le                    
  fuse3-3.3.0-15.el8.ppc64le                                                    
  fuse3-libs-3.3.0-15.el8.ppc64le                                               
  iptables-libs-1.8.4-22.el8.ppc64le                                            
  jansson-2.14-1.el8.ppc64le                                                    
  jq-1.6-3.el8.ppc64le                                                          
  kmod-25-19.el8.ppc64le                                                        
  libibverbs-37.2-1.el8.ppc64le                                                 
  libmnl-1.0.4-6.el8.ppc64le                                                    
  libnet-1.1.6-15.el8.ppc64le                                                   
  libnftnl-1.1.5-5.el8.ppc64le                                                  
  libpcap-14:1.9.1-5.el8.ppc64le                                                
  libslirp-4.4.0-1.module+el8.6.0+15875+dc9a2b96.ppc64le                        
  nftables-1:0.9.3-25.el8.ppc64le                                               
  oniguruma-6.8.2-2.el8.ppc64le                                                 
  platform-python-pip-9.0.3-22.el8.noarch                                       
  protobuf-c-1.3.0-6.el8.ppc64le                                                
  python3-pip-9.0.3-22.el8.noarch                                               
  python3-setuptools-39.2.0-6.el8.noarch                                        
  python36-3.6.8-38.module+el8.5.0+12207+5c5719bc.ppc64le                       
  runc-1:1.1.3-2.module+el8.6.0+15917+093ca6f8.ppc64le                          
  skopeo-2:1.8.0-2.module+el8.6.0+15917+093ca6f8.ppc64le                        
  slirp4netns-1.2.0-2.module+el8.6.0+15917+093ca6f8.ppc64le                     

Complete!
Collecting yq
  Downloading https://files.pythonhosted.org/packages/60/2c/ab35b5ec3b884b6e33b18ba3f6be6b94d607501fca1e5a8de22988690cdb/yq-3.1.0-py3-none-any.whl
Collecting toml>=0.10.0
  Downloading https://files.pythonhosted.org/packages/44/6f/7120676b6d73228c96e17f1f794d8ab046fc910d781c8d151120c3f1569e/toml-0.10.2-py2.py3-none-any.whl
Collecting PyYAML>=5.3.1
  Downloading https://files.pythonhosted.org/packages/36/2b/61d51a2c4f25ef062ae3f74576b01638bebad5e045f747ff12643df63844/PyYAML-6.0.tar.gz (124kB)
  Installing build dependencies: started
  Installing build dependencies: finished with status 'done'
  Getting requirements to build wheel: started
  Getting requirements to build wheel: finished with status 'done'
    Preparing wheel metadata: started
    Preparing wheel metadata: finished with status 'done'
Collecting xmltodict>=0.11.0
  Downloading https://files.pythonhosted.org/packages/94/db/fd0326e331726f07ff7f40675cd86aa804bfd2e5016c727fa761c934990e/xmltodict-0.13.0-py2.py3-none-any.whl
Collecting argcomplete>=1.8.1
  Downloading https://files.pythonhosted.org/packages/d3/e5/c5509683462e51b070df9e83e7f72c1ccfe3f733f328b4a0f06804c27278/argcomplete-2.0.0-py2.py3-none-any.whl
Building wheels for collected packages: PyYAML
  Building wheel for PyYAML (PEP 517): started
  Building wheel for PyYAML (PEP 517): finished with status 'done'
  Created wheel for PyYAML: filename=PyYAML-6.0-cp38-cp38-linux_ppc64le.whl size=45333 sha256=1b035b565aa9065db3cf9a3243f282ffeceb49f005daeff4842ee5b1b5667ead
  Stored in directory: /tmp/pip-ephem-wheel-cache-shs8y80v/wheels/95/84/67/ebeac632c63797cfbeb90128ca41073117721540dad526d213
Successfully built PyYAML
Installing collected packages: toml, PyYAML, xmltodict, argcomplete, yq
Successfully installed PyYAML-6.0 argcomplete-2.0.0 toml-0.10.2 xmltodict-0.13.0 yq-3.1.0
python: Python 3.8.12
yq: yq 3.1.0
jq: jq-1.6
--> 2f7a13e2371
STEP 12/23: COPY ./build/scripts ./versions.json /build/
--> e82fabc2f45
STEP 13/23: COPY ./build/scripts/clone_and_zip.sh /build/build/scripts/
--> c5484636fde
STEP 14/23: COPY ./VERSION /
--> a5058851e75
STEP 15/23: COPY ./devfiles /build/devfiles
--> 41d78725c43
STEP 16/23: WORKDIR /build/
--> 57a0150ad6d
STEP 17/23: RUN ./generate_devworkspace_templates.sh

> core-js@2.6.12 postinstall /build/node_modules/core-js
> node -e "try{require('./postinstall')}catch(e){}"

[96mThank you for using core-js ([94m https://github.com/zloirock/core-js [96m) for polyfilling JavaScript standard library![0m

[96mThe project needs your help! Please consider supporting of core-js on Open Collective or Patreon: [0m
[96m>[94m https://opencollective.com/core-js [0m
[96m>[94m https://www.patreon.com/zloirock [0m

[96mAlso, the author of core-js ([94m https://github.com/zloirock [96m) is looking for a good job -)[0m

+ @eclipse-che/che-theia-devworkspace-handler@0.0.1-1649678182
added 121 packages from 182 contributors and audited 121 packages in 11.347s

4 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities

+ @eclipse-che/che-code-devworkspace-handler@1.64.0-dev-210b722
added 2 packages from 1 contributor and audited 240 packages in 2.464s

4 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities

No sidecar policy. Setting to useDevContainer
No sidecar policy. Setting to useDevContainer
No sidecar policy. Setting to useDevContainer
No sidecar policy. Setting to useDevContainer
No sidecar policy. Setting to useDevContainer
No sidecar policy. Setting to useDevContainer
No sidecar policy. Setting to useDevContainer
No sidecar policy. Setting to useDevContainer
No sidecar policy. Setting to useDevContainer
No sidecar policy. Setting to useDevContainer
No sidecar policy. Setting to useDevContainer
No sidecar policy. Setting to useDevContainer
No sidecar policy. Setting to useDevContainer
--> dd510848191
STEP 18/23: RUN chmod -R g+rwX /build/resources
--> 2423982658d
STEP 19/23: RUN ./check_referenced_images.sh devfiles --registries "${ALLOWED_REGISTRIES}" --tags "${ALLOWED_TAGS}"
 + registry.redhat.io/devspaces/code-rhel8:3.2 PASS - registry.redhat.io allowed
 + registry.redhat.io/devspaces/machineexec-rhel8:3.2 PASS - registry.redhat.io allowed
 + registry.redhat.io/devspaces/theia-endpoint-rhel8:3.2 PASS - registry.redhat.io allowed
 + registry.redhat.io/devspaces/theia-rhel8:3.2 PASS - registry.redhat.io allowed
 + registry.redhat.io/devspaces/udi-rhel8:3.2 PASS - registry.redhat.io allowed
 + registry.redhat.io/jboss-eap-7/eap74-openjdk11-openshift-rhel8:7.4.4 PASS - registry.redhat.io allowed
 + registry.redhat.io/jboss-eap-7/eap-xp3-openjdk11-openshift-rhel8:3.0 PASS - registry.redhat.io allowed
 + registry.redhat.io/rhscl/mongodb-36-rhel7:1-50 PASS - registry.redhat.io allowed
 + registry.redhat.io/devspaces/code-rhel8:3.2 PASS - 3.2 allowed
 + registry.redhat.io/devspaces/machineexec-rhel8:3.2 PASS - 3.2 allowed
 + registry.redhat.io/devspaces/theia-endpoint-rhel8:3.2 PASS - 3.2 allowed
 + registry.redhat.io/devspaces/theia-rhel8:3.2 PASS - 3.2 allowed
 + registry.redhat.io/devspaces/udi-rhel8:3.2 PASS - 3.2 allowed
 = registry.redhat.io/jboss-eap-7/eap74-openjdk11-openshift-rhel8:7.4.4 PASS
 = registry.redhat.io/jboss-eap-7/eap-xp3-openjdk11-openshift-rhel8:3.0 PASS
 = registry.redhat.io/rhscl/mongodb-36-rhel7:1-50 PASS
--> e59b1450e13
STEP 20/23: RUN ./check_mandatory_fields.sh devfiles
Checking devfile 'devfiles/00_java11-maven-eap/meta.yaml'
Checking devfile 'devfiles/00_java11-maven-microprofile-xp3/meta.yaml'
Checking devfile 'devfiles/03_camelk/meta.yaml'
Checking devfile 'devfiles/03_java11-maven-gradle/meta.yaml'
Checking devfile 'devfiles/03_java11-maven-lombok/meta.yaml'
Checking devfile 'devfiles/03_java11-maven-quarkus/meta.yaml'
Checking devfile 'devfiles/04_nodejs-mongo/meta.yaml'
Checking devfile 'devfiles/04_nodejs-simple/meta.yaml'
Checking devfile 'devfiles/04_python/meta.yaml'
Checking devfile 'devfiles/05_cpp/meta.yaml'
Checking devfile 'devfiles/05_go/meta.yaml'
Checking devfile 'devfiles/05_php-cake/meta.yaml'
Checking devfile 'devfiles/05_php-di/meta.yaml'
--> 9d522e4986c
STEP 21/23: COPY ./build/dockerfiles/rhel.cache_projects.sh /tmp/ 
--> a2864d5fe80
STEP 22/23: RUN /tmp/rhel.cache_projects.sh /build/ && rm -rf /tmp/rhel.cache_projects.sh /tmp/resources.tgz 
--> 99562dbe7f2
STEP 23/23: RUN ./index.sh > /build/devfiles/index.json &&     ./list_referenced_images.sh devfiles > /build/devfiles/external_images.txt &&     ./list_referenced_images_by_file.sh devfiles > /build/devfiles/external_images_by_devfile.txt &&     chmod -R g+rwX /build/devfiles
COMMIT devfileregistry:tmp
--> 4e3864d9bea
Successfully tagged localhost/devfileregistry:tmp
4e3864d9beac5687d551285411a3a605aa1a6df6266364db2f55df406f6c84be
<======= END BOOTSTRAP BUILD =======
Downloading root-local.tgz
Downloading resources.tgz
DIFF START *****
diff --suppress-common-lines -u -r /tmp/tmp.KGpIyC9Zxx/devfiles/03_camelk/devworkspace-che-theia-latest.yaml /tmp/tmp.IuOJTOZYKH/devfiles/03_camelk/devworkspace-che-theia-latest.yaml
--- /tmp/tmp.KGpIyC9Zxx/devfiles/03_camelk/devworkspace-che-theia-latest.yaml	2022-09-14 14:53:17.000000000 +0000
+++ /tmp/tmp.IuOJTOZYKH/devfiles/03_camelk/devworkspace-che-theia-latest.yaml	2022-09-16 14:58:17.698628977 +0000
@@ -162,6 +162,8 @@
             - name: THEIA_PLUGINS
               value: local-dir:///plugins/sidecars/tools
           volumeMounts:
+            - name: m2
+              path: /home/user/.m2
             - path: /remote-endpoint
               name: remote-endpoint
             - path: /plugins
@@ -182,11 +184,23 @@
               relative:extension/resources/github_com/redhat-developer/devspaces-vscode-extensions/releases/download/7_44-che-assets/vscode-kubernetes-tools-1.2.1.vsix
             - >-
               relative:extension/resources/github_com/redhat-developer/devspaces-vscode-extensions/releases/download/ve96a2bb/vscode-yaml-0.14.0.vsix
+            - >-
+              relative:extension/resources/github_com/redhat-developer/devspaces-vscode-extensions/releases/download/7_44-che-assets/java-0.82.0-369.vsix
+            - >-
+              relative:extension/resources/github_com/fabric8-analytics/fabric8-analytics-vscode-extension/releases/download/0_3_6/fabric8-analytics-0.3.6.vsix
+            - >-
+              relative:extension/resources/github_com/redhat-developer/devspaces-vscode-extensions/releases/download/7_44-che-assets/vscode-java-debug-0.26.0.vsix
+            - >-
+              relative:extension/resources/open-vsx_org/api/vscjava/vscode-java-test/0_28_1/file/vscjava.vscode-java-test-0.28.1.vsix
+          che-theia.eclipse.org/vscode-preferences:
+            java.server.launchMode: Standard
           app.kubernetes.io/name: tools
       - name: theia-apache-camel-k
         plugin:
           kubernetes:
             name: theia-apache-camel-k
+      - name: m2
+        volume: {}
     projects:
       - name: camel-k
         zip:
diff --suppress-common-lines -u -r /tmp/tmp.KGpIyC9Zxx/devfiles/03_java11-maven-gradle/devworkspace-che-theia-latest.yaml /tmp/tmp.IuOJTOZYKH/devfiles/03_java11-maven-gradle/devworkspace-che-theia-latest.yaml
--- /tmp/tmp.KGpIyC9Zxx/devfiles/03_java11-maven-gradle/devworkspace-che-theia-latest.yaml	2022-09-14 14:53:17.000000000 +0000
+++ /tmp/tmp.IuOJTOZYKH/devfiles/03_java11-maven-gradle/devworkspace-che-theia-latest.yaml	2022-09-16 14:58:17.698628977 +0000
@@ -192,6 +192,8 @@
               relative:extension/resources/github_com/redhat-developer/devspaces-vscode-extensions/releases/download/7_44-che-assets/vscode-java-debug-0.26.0.vsix
             - >-
               relative:extension/resources/open-vsx_org/api/vscjava/vscode-java-test/0_28_1/file/vscjava.vscode-java-test-0.28.1.vsix
+            - >-
+              relative:extension/resources/github_com/fabric8-analytics/fabric8-analytics-vscode-extension/releases/download/0_3_6/fabric8-analytics-0.3.6.vsix
           che-theia.eclipse.org/vscode-preferences:
             java.server.launchMode: Standard
           app.kubernetes.io/name: tools
diff --suppress-common-lines -u -r /tmp/tmp.KGpIyC9Zxx/devfiles/03_java11-maven-lombok/devworkspace-che-theia-latest.yaml /tmp/tmp.IuOJTOZYKH/devfiles/03_java11-maven-lombok/devworkspace-che-theia-latest.yaml
--- /tmp/tmp.KGpIyC9Zxx/devfiles/03_java11-maven-lombok/devworkspace-che-theia-latest.yaml	2022-09-14 14:53:17.000000000 +0000
+++ /tmp/tmp.IuOJTOZYKH/devfiles/03_java11-maven-lombok/devworkspace-che-theia-latest.yaml	2022-09-16 14:58:17.698628977 +0000
@@ -180,11 +180,11 @@
             - >-
               relative:extension/resources/github_com/redhat-developer/devspaces-vscode-extensions/releases/download/7_44-che-assets/java-0.82.0-369.vsix
             - >-
-              relative:extension/resources/github_com/fabric8-analytics/fabric8-analytics-vscode-extension/releases/download/0_3_6/fabric8-analytics-0.3.6.vsix
-            - >-
               relative:extension/resources/github_com/redhat-developer/devspaces-vscode-extensions/releases/download/7_44-che-assets/vscode-java-debug-0.26.0.vsix
             - >-
               relative:extension/resources/open-vsx_org/api/vscjava/vscode-java-test/0_28_1/file/vscjava.vscode-java-test-0.28.1.vsix
+            - >-
+              relative:extension/resources/github_com/fabric8-analytics/fabric8-analytics-vscode-extension/releases/download/0_3_6/fabric8-analytics-0.3.6.vsix
           che-theia.eclipse.org/vscode-preferences:
             java.server.launchMode: Standard
             java.jdt.ls.vmargs: '-javaagent:/lombok.jar'
diff --suppress-common-lines -u -r /tmp/tmp.KGpIyC9Zxx/devfiles/03_java11-maven-quarkus/devworkspace-che-theia-latest.yaml /tmp/tmp.IuOJTOZYKH/devfiles/03_java11-maven-quarkus/devworkspace-che-theia-latest.yaml
--- /tmp/tmp.KGpIyC9Zxx/devfiles/03_java11-maven-quarkus/devworkspace-che-theia-latest.yaml	2022-09-14 14:53:17.000000000 +0000
+++ /tmp/tmp.IuOJTOZYKH/devfiles/03_java11-maven-quarkus/devworkspace-che-theia-latest.yaml	2022-09-16 14:58:17.698628977 +0000
@@ -186,15 +186,17 @@
         attributes:
           che-theia.eclipse.org/vscode-extensions:
             - >-
-              relative:extension/resources/github_com/redhat-developer/devspaces-vscode-extensions/releases/download/7_44-che-assets/vscode-quarkus-1.7.0-437.vsix
-            - >-
               relative:extension/resources/github_com/redhat-developer/devspaces-vscode-extensions/releases/download/7_44-che-assets/java-0.82.0-369.vsix
             - >-
-              relative:extension/resources/github_com/redhat-developer/devspaces-vscode-extensions/releases/download/7_44-che-assets/vscode-microprofile-0.1.1-48.vsix
-            - >-
               relative:extension/resources/github_com/redhat-developer/devspaces-vscode-extensions/releases/download/7_44-che-assets/vscode-java-debug-0.26.0.vsix
             - >-
               relative:extension/resources/open-vsx_org/api/vscjava/vscode-java-test/0_28_1/file/vscjava.vscode-java-test-0.28.1.vsix
+            - >-
+              relative:extension/resources/github_com/redhat-developer/devspaces-vscode-extensions/releases/download/7_44-che-assets/vscode-microprofile-0.1.1-48.vsix
+            - >-
+              relative:extension/resources/github_com/redhat-developer/devspaces-vscode-extensions/releases/download/7_44-che-assets/vscode-quarkus-1.7.0-437.vsix
+            - >-
+              relative:extension/resources/github_com/fabric8-analytics/fabric8-analytics-vscode-extension/releases/download/0_3_6/fabric8-analytics-0.3.6.vsix
           che-theia.eclipse.org/vscode-preferences:
             java.server.launchMode: Standard
           app.kubernetes.io/name: tools
diff --suppress-common-lines -u -r /tmp/tmp.KGpIyC9Zxx/devfiles/05_cpp/devworkspace-che-theia-latest.yaml /tmp/tmp.IuOJTOZYKH/devfiles/05_cpp/devworkspace-che-theia-latest.yaml
--- /tmp/tmp.KGpIyC9Zxx/devfiles/05_cpp/devworkspace-che-theia-latest.yaml	2022-09-14 14:53:17.000000000 +0000
+++ /tmp/tmp.IuOJTOZYKH/devfiles/05_cpp/devworkspace-che-theia-latest.yaml	2022-09-16 14:58:17.698628977 +0000
@@ -174,8 +174,6 @@
             - >-
               relative:extension/resources/github_com/redhat-developer/devspaces-vscode-extensions/releases/download/7_44-che-assets/cdt-vscode-0.0.7-75cf95.vsix
             - >-
-              relative:extension/resources/github_com/fabric8-analytics/fabric8-analytics-vscode-extension/releases/download/0_3_6/fabric8-analytics-0.3.6.vsix
-            - >-
               relative:extension/resources/github_com/redhat-developer/devspaces-vscode-extensions/releases/download/7_44-che-assets/cdt-gdb-vscode-0.0.91-2cbbb8.vsix
             - >-
               relative:extension/resources/github_com/redhat-developer/devspaces-vscode-extensions/releases/download/7_44-che-assets/vscode-clangd-0.1.5-562d00.vsix
diff --suppress-common-lines -u -r /tmp/tmp.KGpIyC9Zxx/devfiles/05_go/devworkspace-che-theia-latest.yaml /tmp/tmp.IuOJTOZYKH/devfiles/05_go/devworkspace-che-theia-latest.yaml
--- /tmp/tmp.KGpIyC9Zxx/devfiles/05_go/devworkspace-che-theia-latest.yaml	2022-09-14 14:53:17.000000000 +0000
+++ /tmp/tmp.IuOJTOZYKH/devfiles/05_go/devworkspace-che-theia-latest.yaml	2022-09-16 14:58:17.698628977 +0000
@@ -180,6 +180,8 @@
           che-theia.eclipse.org/vscode-extensions:
             - >-
               relative:extension/resources/github_com/golang/vscode-go/releases/download/v0_23_0/go-0.23.0.vsix
+            - >-
+              relative:extension/resources/github_com/fabric8-analytics/fabric8-analytics-vscode-extension/releases/download/0_3_6/fabric8-analytics-0.3.6.vsix
           che-theia.eclipse.org/vscode-preferences:
             go.lintTool: golangci-lint
             go.lintFlags: '--fast'
Binary files /tmp/tmp.KGpIyC9Zxx/resources/v2/camel-k.zip and /tmp/tmp.IuOJTOZYKH/resources/v2/camel-k.zip differ
Binary files /tmp/tmp.KGpIyC9Zxx/resources/v2/c-plus-plus.zip and /tmp/tmp.IuOJTOZYKH/resources/v2/c-plus-plus.zip differ
Binary files /tmp/tmp.KGpIyC9Zxx/resources/v2/golang-health-check.zip and /tmp/tmp.IuOJTOZYKH/resources/v2/golang-health-check.zip differ
Binary files /tmp/tmp.KGpIyC9Zxx/resources/v2/gs-validating-form-input.zip and /tmp/tmp.IuOJTOZYKH/resources/v2/gs-validating-form-input.zip differ
Binary files /tmp/tmp.KGpIyC9Zxx/resources/v2/lombok-project-sample.zip and /tmp/tmp.IuOJTOZYKH/resources/v2/lombok-project-sample.zip differ
Binary files /tmp/tmp.KGpIyC9Zxx/resources/v2/quarkus-quickstarts.zip and /tmp/tmp.IuOJTOZYKH/resources/v2/quarkus-quickstarts.zip differ
***** END DIFF
Untagged: localhost/devfileregistry:tmp
Deleted: 4e3864d9beac5687d551285411a3a605aa1a6df6266364db2f55df406f6c84be
Deleted: 99562dbe7f2c050558f50a919be1bad561fc2a85870ec4b72819f3b047c17ddd
Deleted: a2864d5fe8074e5d2ac8e98c7267e90039fa4fdf3c241e3f246064631d253c20
Deleted: 9d522e4986c694c16e9e1cf3845e9110fb470f2babb10489eaadda8b872b5ebc
Deleted: e59b1450e1333514ac3d34500e8c83b52136d790d3e087602ba3449bd6fd2775
Deleted: 2423982658d435a103f78ad4c021891b670bf2db8fbdeb4abc04d5ef4e50f0c6
Deleted: dd5108481918c5bf3cc018f40b52aac65399d51368052d19cedc340f23ebe7f9
Deleted: 57a0150ad6df62b388cf773c0657304007afd87af1bab920baa13c422ace1e77
Deleted: 41d78725c435b8694c38c2782d2240948d231efb7bf1578c72f3d66f2e4605b3
Deleted: a5058851e7596742fc058a362377ad273a9631b6c7c08b33fcfeefd6db7dc166
Deleted: c5484636fde1b18082eb9fe0c280a39b301d2b167666be55942b736d0c1f8b03
Deleted: e82fabc2f45b7ec1ac0fac7692bec7b5fa2ffb91e4f1fdc57c7e1c6098be26e3
Deleted: 2f7a13e2371ac64ea2d61c0739e9d610d26adcb0177ad47e71f5308c06f2946b
Deleted: 3c0a39133e98ee7f1a5a9a041f40bb3c29fc54810738c26010d51a3ce34e1ab0
Deleted: 1236ec1ff67c69c23ff4d00aba32f1814cbac1ce99cfd96c9eacda43f3ef67b8
Deleted: 1a775abcb38879f2c0e4b7e0f81671a139e1baf22e8b29be3808762708aa6bdd
Deleted: 9b2dd84790c97f4f7a109a81194d5b23c836098f2086846bd9d81beb9221c3e6
Deleted: 0263fc7973b2826faacdb1167b7d2af9c5c5373899af7e0a7fbb0761544984ee
Deleted: b496b4f32278b8505421632151f2ffa3807d6733d44842ec029eb2941c401021
Deleted: a16d01e04ead374755b58454311ff8a68c474b3e681908e37bd1cfef7ee74498
Deleted: 60ce43fc0b6b91b00f1e46caa3333633cd78ad56424b34c14cbb54bb0431a644
Deleted: 9545f5af4338d5bf5e67d8d9112cc2dcddbc1ce3320cf1b02909e2987972ed3e
File already uploaded: root-local.tgz
Uploading: resources.tgz
Source upload succeeded. Don't forget to commit the sources file
rm 'resources.tgz'
rm 'root-local.tgz'
